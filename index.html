<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precalculus Test Reflection Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #adb5bd;
            --bg-gradient: linear-gradient(135deg, #4361ee, #3a0ca3);
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: var(--bg-gradient);
            color: white;
            padding: 20px 0;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .header-content {
            position: relative;
            z-index: 2;
            padding: 0 30px;
        }
        .header-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.3;
        }
        .header-bg-item {
            position: absolute;
            font-size: 40px;
            color: rgba(255, 255, 255, 0.2);
            transform: rotate(-30deg);
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        .subtitle {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }
        .tab:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }
        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        .tab-content {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            margin: 20px 0;
            height: 300px;
        }
        .flex-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .flex-item {
            flex: 1;
            min-width: 0;
        }
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.1);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        .info-box {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .info-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-right: 15px;
            width: 80px;
            text-align: center;
        }
        .info-text {
            font-size: 1rem;
        }
        .info-box:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .difficulty-map {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .topic-card {
            padding: 15px;
            border-radius: 8px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 120px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .high-difficulty {
            background: linear-gradient(135deg, #f72585, #b5179e);
        }
        .medium-difficulty {
            background: linear-gradient(135deg, #3a86ff, #4361ee);
        }
        .low-difficulty {
            background: linear-gradient(135deg, #4cc9f0, #4895ef);
        }
        .topic-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        .topic-difficulty {
            font-size: 0.85rem;
            opacity: 0.9;
        }
        .topic-students {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 10px;
        }
        .topic-icon {
            position: absolute;
            bottom: -20px;
            right: -20px;
            font-size: 80px;
            opacity: 0.2;
        }
        .progress-container {
            background-color: #e9ecef;
            border-radius: 10px;
            height: 8px;
            width: 100%;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            background: var(--bg-gradient);
            transition: width 1s ease;
        }
        .strategy-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .strategy-item:hover {
            background: #f0f7ff;
            transform: translateX(5px);
        }
        .strategy-icon {
            font-size: 1.8rem;
            margin-right: 15px;
            color: var(--primary);
        }
        .strategy-content {
            flex-grow: 1;
        }
        .strategy-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .strategy-users {
            font-size: 0.85rem;
            color: var(--gray);
        }
        input[type="text"],
        input[type="email"],
        select,
        textarea,
        button {
            display: block;
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        select {
            appearance: none;
            background: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='%23333' d='M7 10l5 5 5-5H7z'/%3E%3C/svg%3E") no-repeat right 12px center;
            background-color: white;
        }
        button {
            background: var(--bg-gradient);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        button:hover {
            background: linear-gradient(135deg, #3a0ca3, #4361ee);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        .checkbox-group {
            margin: 10px 0;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .checkbox-item input[type="checkbox"] {
            margin-right: 10px;
            width: auto;
        }
        .result-container {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f0f7ff;
            border-radius: 10px;
            border-left: 5px solid var(--primary);
        }
        .success-message {
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: 600;
            font-size: 1.2rem;
        }
        .recommendation-list {
            list-style-type: none;
        }
        .recommendation-item {
            margin-bottom: 15px;
            position: relative;
            padding-left: 25px;
        }
        .recommendation-item:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: bold;
        }
        .quote-container {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
        }
        .quote-text {
            font-style: italic;
            margin-bottom: 10px;
        }
        .quote-author {
            font-weight: 600;
            text-align: right;
        }
        .quote-marks {
            position: absolute;
            font-size: 4rem;
            opacity: 0.1;
            color: var(--primary);
        }
        .quote-marks.open {
            top: 10px;
            left: 10px;
        }
        .quote-marks.close {
            bottom: 10px;
            right: 10px;
        }
        .resource-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .resource-item:hover {
            background: #f0f7ff;
            transform: translateX(5px);
        }
        .resource-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            margin-right: 15px;
            font-size: 1.5rem;
        }
        .resource-content {
            flex-grow: 1;
        }
        .resource-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .resource-count {
            font-size: 0.85rem;
            color: var(--gray);
        }
        .resource-action {
            margin-left: 15px;
        }
        .btn-small {
            padding: 8px 12px;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        .form-check-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .form-check-input {
            margin-right: 10px;
        }
        .badges-section {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        .badge {
            flex: 1;
            min-width: 220px;
            height: 220px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            color: white;
            background: var(--bg-gradient);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .badge:hover {
            transform: translateY(-10px) rotate(5deg);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        .badge-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        .badge-content {
            font-size: 3rem;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }
        .badge-description {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        .badge-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.3;
        }
        .badge-image {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0.2;
            z-index: 1;
        }
        .feedback-box {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .avatar-group {
            display: flex;
            margin-bottom: 20px;
        }
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: -10px;
            border: 2px solid white;
        }
        .emoji-animation {
            position: fixed;
            font-size: 30px;
            user-select: none;
            pointer-events: none;
            z-index: 9999;
            animation: floatUp 3s forwards;
        }
        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }
        .emoji-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            width: auto;
            display: inline;
            padding: 5px;
            margin: 0 5px;
        }
        .emoji-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 30px;
            top: -10px;
            background: var(--primary);
            opacity: 0.8;
            animation: confetti-fall 3s ease-in-out forwards;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .motivational-card {
            position: relative;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            color: white;
            overflow: hidden;
        }
        .motivational-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 20%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 20%);
            z-index: 1;
        }
        .motivational-content {
            position: relative;
            z-index: 2;
        }
        .motivational-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .motivational-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.7;
        }
        .achievements {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        .achievement {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex: 1;
            min-width: 150px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .achievement:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }
        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .achievement-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        @media (max-width: 768px) {
            .flex-container {
                flex-direction: column;
            }
            .tabs {
                flex-direction: column;
            }
            .info-grid {
                grid-template-columns: 1fr;
            }
            .difficulty-map {
                grid-template-columns: 1fr;
            }
            .badges-section {
                flex-direction: column;
            }
            .badge {
                width: 100%;
                height: 180px;
                border-radius: 10px;
            }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        canvas#bg-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(67, 97, 238, 0.2);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .teacher-notes {
            margin-top: 40px;
            padding: 20px;
            background: #fff8e8;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
        }
        .teacher-notes-title {
            color: #d4a200;
            margin-bottom: 15px;
        }
        .btn-3d {
            position: relative;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            padding: 15px 25px;
            margin: 10px 0;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 5px 0 #3a0ca3;
            transition: all 0.1s ease;
        }
        .btn-3d:hover {
            box-shadow: 0 3px 0 #3a0ca3;
            transform: translateY(2px);
        }
        .btn-3d:active {
            box-shadow: 0 0 0 #3a0ca3;
            transform: translateY(5px);
        }
    </style>
</head>
<body>
    <div class="loading">
        <div class="loading-spinner"></div>
    </div>

    <div class="container">
        <header>
            <div class="header-content">
                <h1>Precalculus Test Reflection Dashboard</h1>
                <p class="subtitle">Insights and strategies to improve your performance</p>
            </div>
            <div class="header-bg">
                <div class="header-bg-item" style="top: 20px; left: 50px;">∫</div>
                <div class="header-bg-item" style="top: 80px; left: 200px;">θ</div>
                <div class="header-bg-item" style="top: 40px; left: 350px;">π</div>
                <div class="header-bg-item" style="top: 30px; right: 100px;">√</div>
                <div class="header-bg-item" style="top: 10px; right: 230px;">cos</div>
                <div class="header-bg-item" style="top: 70px; right: 50px;">tan</div>
            </div>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="overview">Overview</div>
            <div class="tab" data-tab="preparation">Preparation</div>
            <div class="tab" data-tab="strategies">Study Strategies</div>
            <div class="tab" data-tab="topics">Challenging Topics</div>
            <div class="tab" data-tab="resources">Resources</div>
            <div class="tab" data-tab="assessment">Self-Assessment</div>
        </div>

        <!-- OVERVIEW TAB -->
        <div class="tab-content active" id="overview">
            <h2>Class Performance Overview</h2>
            <div class="badges-section">
                <div class="badge" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                    <div class="badge-title">Preparedness</div>
                    <div class="badge-content">23%</div>
                    <div class="badge-description">Felt well-prepared</div>
                </div>
                <div class="badge" style="background: linear-gradient(135deg, #4cc9f0, #4361ee);">
                    <div class="badge-title">Desired Grade</div>
                    <div class="badge-content">23%</div>
                    <div class="badge-description">Achieved target grade</div>
                </div>
                <div class="badge" style="background: linear-gradient(135deg, #3a86ff, #480ca8);">
                    <div class="badge-title">Top Strategy</div>
                    <div class="badge-content">64%</div>
                    <div class="badge-description">Used practice problems</div>
                </div>
            </div>
            <div class="flex-container">
                <div class="flex-item">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Preparation Level</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="preparationChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="flex-item">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Grade Achievement</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="gradesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Top 5 Challenging Topics</div>
                </div>
                <div class="chart-container">
                    <canvas id="topicsChart"></canvas>
                </div>
            </div>
            <div class="motivational-card">
                <div class="motivational-pattern"></div>
                <div class="motivational-content">
                    <div class="motivational-title">You're Not Alone!</div>
                    <div class="motivational-text">
                        Looking at the data, many of your classmates faced similar challenges. The good news? 
                        We can learn from each other's experiences. Students who succeeded used specific strategies 
                        that you can adopt too!
                    </div>
                    <div class="achievements">
                        <div class="achievement" onclick="showAchievementDetails('practice')">
                            <div class="achievement-icon">📝</div>
                            <div class="achievement-title">Practice Tests</div>
                            <div class="achievement-value">Most effective</div>
                        </div>
                        <div class="achievement" onclick="showAchievementDetails('early')">
                            <div class="achievement-icon">⏰</div>
                            <div class="achievement-title">Early Prep</div>
                            <div class="achievement-value">Top improvement</div>
                        </div>
                        <div class="achievement" onclick="showAchievementDetails('formula')">
                            <div class="achievement-icon">🔢</div>
                            <div class="achievement-title">Formula Mastery</div>
                            <div class="achievement-value">Key to success</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PREPARATION TAB -->
        <div class="tab-content" id="preparation">
            <h2>Test Preparation Analysis</h2>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Factors Influencing Preparation</div>
                </div>
                <div class="chart-container">
                    <canvas id="factorsChart"></canvas>
                </div>
            </div>
            <h3>Time Management Issues</h3>
            <div class="info-grid">
                <div class="info-box">
                    <div class="info-number">7</div>
                    <div class="info-text">Students mentioned procrastination as a key factor</div>
                </div>
                <div class="info-box">
                    <div class="info-number">6</div>
                    <div class="info-text">Students cited work commitments/busy schedule</div>
                </div>
                <div class="info-box">
                    <div class="info-number">3</div>
                    <div class="info-text">Students had multiple classes/tests on the same day</div>
                </div>
            </div>
            <h3>Material Difficulty</h3>
            <div class="info-grid">
                <div class="info-box">
                    <div class="info-number">8</div>
                    <div class="info-text">Students struggled with complex concepts, particularly graphing</div>
                </div>
                <div class="info-box">
                    <div class="info-number">5</div>
                    <div class="info-text">Students found trigonometric functions/identities challenging</div>
                </div>
                <div class="info-box">
                    <div class="info-number">5</div>
                    <div class="info-text">Students had difficulties with unit circle comprehension</div>
                </div>
                <div class="info-box">
                    <div class="info-number">6</div>
                    <div class="info-text">Students struggled applying formulas in different contexts</div>
                </div>
            </div>
            <h3>Personal Challenges</h3>
            <div class="info-grid">
                <div class="info-box">
                    <div class="info-number">4</div>
                    <div class="info-text">Students experienced test anxiety</div>
                </div>
                <div class="info-box">
                    <div class="info-number">1</div>
                    <div class="info-text">Student had calculator issues</div>
                </div>
                <div class="info-box">
                    <div class="info-number">3</div>
                    <div class="info-text">Students mentioned confidence issues</div>
                </div>
            </div>
            <div class="quote-container">
                <div class="quote-marks open">"</div>
                <p class="quote-text">I tried to study the night before, but after working 8 hours I was too tired to focus. Next time I'll start studying at least a week in advance and use practice tests multiple times.</p>
                <p class="quote-author">- Anonymous Student</p>
                <div class="quote-marks close">"</div>
            </div>
        </div>

        <!-- STRATEGIES TAB -->
        <div class="tab-content" id="strategies">
            <h2>Effective Study Strategies</h2>
            <div class="flex-container">
                <div class="flex-item">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Methods Used</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="methodsChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="flex-item">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Effective Strategies</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="effectiveChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Top Strategies From Successful Students</h3>
            <div class="strategy-item">
                <div class="strategy-icon">📝</div>
                <div class="strategy-content">
                    <div class="strategy-title">Take Practice Tests Multiple Times</div>
                    <div class="strategy-description">Repeatedly working through practice tests helps identify weak areas and builds confidence.</div>
                    <div class="strategy-users">Used by 10 students who reported success</div>
                </div>
            </div>
            <div class="strategy-item">
                <div class="strategy-icon">📊</div>
                <div class="strategy-content">
                    <div class="strategy-title">Formula Sheets & Reference Cards</div>
                    <div class="strategy-description">Creating your own formula sheets helps with memorization and provides quick reference during study.</div>
                    <div class="strategy-users">Used by 6 students who reported success</div>
                </div>
            </div>
            <div class="strategy-item">
                <div class="strategy-icon">🎬</div>
                <div class="strategy-content">
                    <div class="strategy-title">Visual Learning Resources</div>
                    <div class="strategy-description">Videos and visual aids help understand complex concepts, especially for graphing and unit circle topics.</div>
                    <div class="strategy-users">Used by 6 students who reported success</div>
                </div>
            </div>
            <div class="strategy-item">
                <div class="strategy-icon">🔢</div>
                <div class="strategy-content">
                    <div class="strategy-title">Breaking Down Problems Step-by-Step</div>
                    <div class="strategy-description">Methodically working through problems increases understanding of processes and formulas.</div>
                    <div class="strategy-users">Used by 5 students who reported success</div>
                </div>
            </div>
            <h3>Plans for Improvement</h3>
            <div class="chart-container">
                <canvas id="improvementChart"></canvas>
            </div>
            <div class="quote-container">
                <div class="quote-marks open">"</div>
                <p class="quote-text">What really worked for me was doing the practice test three times. The first time I figured out what I didn't know, the second time I focused on those areas, and the third time built my confidence.</p>
                <p class="quote-author">- Student who achieved their desired grade</p>
                <div class="quote-marks close">"</div>
            </div>
        </div>

        <!-- TOPICS TAB -->
        <div class="tab-content" id="topics">
            <h2>Challenging Topic Analysis</h2>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Topic Difficulty Distribution</div>
                </div>
                <div class="chart-container">
                    <canvas id="difficultyChart"></canvas>
                </div>
            </div>
            <h3>Difficulty Map</h3>
            <p>Click on a topic to see specific strategies that helped students master it.</p>
            <div class="difficulty-map">
                <div class="topic-card high-difficulty" onclick="showTopicStrategies('graphing')">
                    <div class="topic-title">Graphing Functions</div>
                    <div class="topic-difficulty">High Difficulty</div>
                    <div class="topic-students">8 students struggled</div>
                    <div class="topic-icon">📈</div>
                </div>
                <div class="topic-card high-difficulty" onclick="showTopicStrategies('trig')">
                    <div class="topic-title">Trigonometric Functions</div>
                    <div class="topic-difficulty">High Difficulty</div>
                    <div class="topic-students">5 students struggled</div>
                    <div class="topic-icon">📐</div>
                </div>
                <div class="topic-card high-difficulty" onclick="showTopicStrategies('unit')">
                    <div class="topic-title">Unit Circle</div>
                    <div class="topic-difficulty">High Difficulty</div>
                    <div class="topic-students">5 students struggled</div>
                    <div class="topic-icon">⭕</div>
                </div>
                <div class="topic-card high-difficulty" onclick="showTopicStrategies('formulas')">
                    <div class="topic-title">Formula Application</div>
                    <div class="topic-difficulty">High Difficulty</div>
                    <div class="topic-students">6 students struggled</div>
                    <div class="topic-icon">🔣</div>
                </div>
                <div class="topic-card medium-difficulty" onclick="showTopicStrategies('transformations')">
                    <div class="topic-title">Function Transformations</div>
                    <div class="topic-difficulty">Medium Difficulty</div>
                    <div class="topic-students">4 students struggled</div>
                    <div class="topic-icon">🔄</div>
                </div>
                <div class="topic-card medium-difficulty" onclick="showTopicStrategies('steps')">
                    <div class="topic-title">Multi-Step Problems</div>
                    <div class="topic-difficulty">Medium Difficulty</div>
                    <div class="topic-students">3 students struggled</div>
                    <div class="topic-icon">🧩</div>
                </div>
                <div class="topic-card low-difficulty" onclick="showTopicStrategies('conversion')">
                    <div class="topic-title">Unit Conversion</div>
                    <div class="topic-difficulty">Lower Difficulty</div>
                    <div class="topic-students">2 students struggled</div>
                    <div class="topic-icon">🔄</div>
                </div>
                <div class="topic-card low-difficulty" onclick="showTopicStrategies('basic')">
                    <div class="topic-title">Basic Operations</div>
                    <div class="topic-difficulty">Lower Difficulty</div>
                    <div class="topic-students">1 student struggled</div>
                    <div class="topic-icon">➕</div>
                </div>
            </div>
            <div id="topic-strategies" class="result-container" style="display: none;">
                <h3 id="selected-topic">Topic Strategies</h3>
                <div id="topic-strategy-content"></div>
            </div>
            <div class="quote-container">
                <div class="quote-marks open">"</div>
                <p class="quote-text">Graphing was really tough for me until I started using Desmos to visualize how changing values affects the graph. Then I'd sketch it by hand to reinforce the concept.</p>
                <p class="quote-author">- Student who improved their graphing skills</p>
                <div class="quote-marks close">"</div>
            </div>
        </div>

        <!-- RESOURCES TAB -->
        <div class="tab-content" id="resources">
            <h2>Helpful Resources</h2>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Most Recommended Resources</div>
                </div>
                <div class="chart-container">
                    <canvas id="resourcesChart"></canvas>
                </div>
            </div>
            <h3>Top Recommended Resources</h3>
            <div class="resource-item">
                <div class="resource-icon">📝</div>
                <div class="resource-content">
                    <div class="resource-title">Practice Tests</div>
                    <div class="resource-description">Complete test simulation with similar format and difficulty level.</div>
                    <div class="resource-count">9 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('Resource will open in Learning Management System')">Access</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">🎬</div>
                <div class="resource-content">
                    <div class="resource-title">Professor's Videos</div>
                    <div class="resource-description">Step-by-step explanations of key concepts and problem-solving techniques.</div>
                    <div class="resource-count">8 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('Resource will open in Learning Management System')">Watch</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">📊</div>
                <div class="resource-content">
                    <div class="resource-title">Formula Sheets</div>
                    <div class="resource-description">Comprehensive reference for all formulas used in the course.</div>
                    <div class="resource-count">6 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('Resource will open in Learning Management System')">Download</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">🤖</div>
                <div class="resource-content">
                    <div class="resource-title">AI Tutor</div>
                    <div class="resource-description">Interactive tool that provides personalized problem explanations and practice.</div>
                    <div class="resource-count">5 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('Resource will open in Learning Management System')">Try It</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">📺</div>
                <div class="resource-content">
                    <div class="resource-title">The Organic Chemistry Tutor (YouTube)</div>
                    <div class="resource-description">Clear explanations of precalculus concepts with many examples.</div>
                    <div class="resource-count">3 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('External resource would open in new tab')">Visit</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">👥</div>
                <div class="resource-content">
                    <div class="resource-title">TCC Math Center</div>
                    <div class="resource-description">In-person and online tutoring with math specialists.</div>
                    <div class="resource-count">5 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('Would open Math Center schedule')">Schedule</button>
                </div>
            </div>
            <div class="resource-item">
                <div class="resource-icon">📱</div>
                <div class="resource-content">
                    <div class="resource-title">Desmos Graphing Calculator</div>
                    <div class="resource-description">Interactive online graphing tool for visualizing functions.</div>
                    <div class="resource-count">2 students recommended</div>
                </div>
                <div class="resource-action">
                    <button class="btn-small" onclick="alert('External resource would open in new tab')">Open Tool</button>
                </div>
            </div>
            <div class="emoji-container">
                <p>How helpful do you find these resources?</p>
                <button class="emoji-btn" onclick="animateEmoji('😕')">😕</button>
                <button class="emoji-btn" onclick="animateEmoji('🙂')">🙂</button>
                <button class="emoji-btn" onclick="animateEmoji('😀')">😀</button>
                <button class="emoji-btn" onclick="animateEmoji('🤩')">🤩</button>
            </div>
        </div>

        <!-- SELF-ASSESSMENT TAB -->
        <div class="tab-content" id="assessment">
            <h2>Self-Assessment & Recommendations</h2>
            <div class="card">
                <p>Answer a few questions to get personalized study recommendations based on successful student strategies!</p>
                <form id="self-assessment-form">
                    <div class="form-group">
                        <label>How prepared did you feel for the last test?</label>
                        <select id="preparation-level" required>
                            <option value="">-- Select --</option>
                            <option value="well">Well-prepared</option>
                            <option value="somewhat">Somewhat prepared</option>
                            <option value="not">Not well-prepared</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Which topics did you find most challenging? (Select all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="topic-graphing" name="challenging-topics" value="graphing">
                                <label for="topic-graphing">Graphing functions</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="topic-trig" name="challenging-topics" value="trig">
                                <label for="topic-trig">Trigonometric functions/identities</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="topic-unit" name="challenging-topics" value="unit">
                                <label for="topic-unit">Unit circle</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="topic-formulas" name="challenging-topics" value="formulas">
                                <label for="topic-formulas">Applying formulas in different contexts</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="topic-transformations" name="challenging-topics" value="transformations">
                                <label for="topic-transformations">Function transformations</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Which study methods did you use? (Select all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-practice" name="study-methods" value="practice">
                                <label for="method-practice">Practice problems/tests</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-review" name="study-methods" value="review">
                                <label for="method-review">Reviewing notes/textbook</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-formula" name="study-methods" value="formula">
                                <label for="method-formula">Creating/using formula sheets</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-videos" name="study-methods" value="videos">
                                <label for="method-videos">Watching lecture videos/YouTube</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-ai" name="study-methods" value="ai">
                                <label for="method-ai">AI tutor assistance</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-flashcards" name="study-methods" value="flashcards">
                                <label for="method-flashcards">Index cards/flashcards</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="method-groups" name="study-methods" value="groups">
                                <label for="method-groups">Study groups</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>What factors affected your preparation? (Select all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="factor-procrastination" name="factors" value="procrastination">
                                <label for="factor-procrastination">Procrastination</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factor-work" name="factors" value="work">
                                <label for="factor-work">Work commitments/busy schedule</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factor-multiple" name="factors" value="multiple">
                                <label for="factor-multiple">Multiple classes/tests on same day</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factor-anxiety" name="factors" value="anxiety">
                                <label for="factor-anxiety">Test anxiety</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factor-confidence" name="factors" value="confidence">
                                <label for="factor-confidence">Confidence issues</label>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-3d">Get Personalized Recommendations</button>
                </form>
            </div>
            <div id="recommendation-result" class="result-container">
                <div class="success-message">Your Personalized Study Plan</div>
                <div id="recommendation-content"></div>
            </div>
            <div class="feedback-box" style="display: none;" id="success-stories">
                <h3>Success Stories From Students Like You</h3>
                <div class="avatar-group">
                    <div class="avatar">S1</div>
                    <div class="avatar">S2</div>
                    <div class="avatar">S3</div>
                    <div class="avatar">+5</div>
                </div>
                <div id="success-stories-content"></div>
            </div>
        </div>
    </div>

    <script>
        // Tabs Functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Load charts when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            showLoadingIndicator();
            setTimeout(() => {
                createCharts();
                hideLoadingIndicator();
            }, 800);
            document.getElementById('self-assessment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                generateRecommendations();
            });
        });

        // Show loading indicator
        function showLoadingIndicator() {
            document.querySelector('.loading').style.display = 'flex';
        }
        // Hide loading indicator
        function hideLoadingIndicator() {
            document.querySelector('.loading').style.display = 'none';
        }

        // Create all charts
        function createCharts() {
            // Preparation Level Chart
            const prepCtx = document.getElementById('preparationChart').getContext('2d');
            new Chart(prepCtx, {
                type: 'pie',
                data: {
                    labels: ['Well-prepared', 'Somewhat prepared', 'Not well-prepared'],
                    datasets: [{
                        data: [23, 27, 50],
                        backgroundColor: ['#4cc9f0', '#4361ee', '#f72585'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            // Grades Chart
            const gradesCtx = document.getElementById('gradesChart').getContext('2d');
            new Chart(gradesCtx, {
                type: 'pie',
                data: {
                    labels: ['Received desired grade', 'Did not receive desired grade', 'Partially satisfied'],
                    datasets: [{
                        data: [23, 54, 23],
                        backgroundColor: ['#4cc9f0', '#f72585', '#4361ee'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            // Topics Chart
            const topicsCtx = document.getElementById('topicsChart').getContext('2d');
            new Chart(topicsCtx, {
                type: 'bar',
                data: {
                    labels: ['Graphing', 'Formula Application', 'Confusion About Concepts', 'Recalling Steps', 'Trigonometric Functions'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [8, 6, 7, 6, 5],
                        backgroundColor: '#4361ee',
                        borderColor: '#3a0ca3',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 10 } }
                }
            });

            // Factors Chart
            const factorsCtx = document.getElementById('factorsChart').getContext('2d');
            new Chart(factorsCtx, {
                type: 'bar',
                data: {
                    labels: ['Procrastination', 'Work Commitments', 'Multiple Tests', 'Test Anxiety', 'Confidence Issues', 'Calculator Issues'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [7, 6, 3, 4, 3, 1],
                        backgroundColor: '#4361ee',
                        borderColor: '#3a0ca3',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 10 } }
                }
            });

            // Methods Chart
            const methodsCtx = document.getElementById('methodsChart').getContext('2d');
            new Chart(methodsCtx, {
                type: 'bar',
                data: {
                    labels: ['Practice problems', 'Notes/textbook', 'Formula sheets', 'Videos', 'AI tutor', 'Flashcards', 'Study groups'],
                    datasets: [{
                        label: 'Percentage of Students',
                        data: [64, 45, 32, 32, 14, 14, 9],
                        backgroundColor: '#4361ee',
                        borderColor: '#3a0ca3',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 70,
                            ticks: {
                                callback: function(value) { return value + '%'; }
                            }
                        }
                    }
                }
            });

            // Effective Strategies Chart
            const effectiveCtx = document.getElementById('effectiveChart').getContext('2d');
            new Chart(effectiveCtx, {
                type: 'bar',
                data: {
                    labels: ['Practice tests', 'Formula sheets', 'Videos', 'Step-by-step', 'Teaching others', 'Color-coding'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [10, 6, 6, 5, 2, 2],
                        backgroundColor: '#4cc9f0',
                        borderColor: '#4361ee',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 12 } }
                }
            });

            // Improvement Chart (Fixed)
            const improvementCtx = document.getElementById('improvementChart').getContext('2d');
            new Chart(improvementCtx, {
                type: 'bar',
                data: {
                    labels: ['Start studying earlier', 'Improve time management', 'Utilize tutoring', 'Take practice tests multiple times', 'Focus on weak topics', 'Better organize notes', 'Form study groups', 'More effective flashcards', 'Take breaks before tests'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [12, 7, 6, 5, 5, 4, 3, 2, 2],
                        backgroundColor: '#4361ee',
                        borderColor: '#3a0ca3',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: { legend: { display: false } },
                    scales: { x: { beginAtZero: true, max: 15 } }
                }
            });

            // Difficulty Chart
            const difficultyCtx = document.getElementById('difficultyChart').getContext('2d');
            new Chart(difficultyCtx, {
                type: 'pie',
                data: {
                    labels: ['Graphing Functions', 'Trigonometric Functions', 'Unit Circle', 'Formula Application', 'Others'],
                    datasets: [{
                        data: [8, 5, 5, 6, 4],
                        backgroundColor: ['#f72585', '#b5179e', '#7209b7', '#560bad', '#480ca8'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            // Resources Chart
            const resourcesCtx = document.getElementById('resourcesChart').getContext('2d');
            new Chart(resourcesCtx, {
                type: 'bar',
                data: {
                    labels: ['Practice tests', 'Professor videos', 'Formula sheets', 'AI tutor', 'TCC math center', 'YouTube', 'Pearson platform', 'Khan Academy', 'Desmos'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [9, 8, 6, 5, 5, 4, 4, 2, 2],
                        backgroundColor: '#4cc9f0',
                        borderColor: '#4361ee',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 10 } }
                }
            });
        }

        // Show topic specific strategies
        function showTopicStrategies(topic) {
            const topicStrategies = document.getElementById('topic-strategies');
            const topicTitle = document.getElementById('selected-topic');
            const topicContent = document.getElementById('topic-strategy-content');
            let strategies = '';
            let title = '';
            switch(topic) {
                case 'graphing':
                    title = 'Strategies for Mastering Graphing Functions';
                    strategies = `
                        <p>8 students identified graphing functions as their biggest challenge. Here's what helped successful students:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Use Desmos graphing calculator to visualize parameter changes</li>
                            <li class="recommendation-item">Practice breaking down transformations one at a time</li>
                            <li class="recommendation-item">Create a reference sheet with standard "parent functions"</li>
                            <li class="recommendation-item">Watch targeted video tutorials</li>
                            <li class="recommendation-item">Practice identifying key graph features</li>
                        </ul>
                        <p><strong>Resource Tip:</strong> The practice test includes a dedicated graphing section.</p>
                    `;
                    break;
                case 'trig':
                    title = 'Strategies for Mastering Trigonometric Functions';
                    strategies = `
                        <p>5 students identified trigonometric functions as challenging. Here's what helped:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Create a visual cheat sheet linking the unit circle to trig functions</li>
                            <li class="recommendation-item">Memorize key unit circle angles</li>
                            <li class="recommendation-item">Practice converting between degrees and radians</li>
                            <li class="recommendation-item">Use mnemonic devices for quadrant signs</li>
                            <li class="recommendation-item">Observe function patterns (period, domain, range)</li>
                        </ul>
                        <p><strong>Resource Tip:</strong> The Unit Circle Song can aid memorization.</p>
                    `;
                    break;
                case 'unit':
                    title = 'Strategies for Mastering the Unit Circle';
                    strategies = `
                        <p>5 students found the unit circle difficult. Successful strategies include:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Redraw the unit circle from memory</li>
                            <li class="recommendation-item">Utilize its symmetry to ease memorization</li>
                            <li class="recommendation-item">Practice finding coordinates quickly</li>
                            <li class="recommendation-item">Relate circle values to trig graphs</li>
                            <li class="recommendation-item">Use interactive online tools</li>
                        </ul>
                        <p><strong>Resource Tip:</strong> Color-coding the unit circle can enhance visualization.</p>
                    `;
                    break;
                case 'formulas':
                    title = 'Strategies for Formula Application';
                    strategies = `
                        <p>6 students struggled with formula application. Consider:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Create a comprehensive formula sheet with examples</li>
                            <li class="recommendation-item">Practice matching formulas to problem types</li>
                            <li class="recommendation-item">Mix problem types during practice</li>
                            <li class="recommendation-item">Develop flowcharts for formula selection</li>
                            <li class="recommendation-item">Explain your reasoning to reinforce learning</li>
                        </ul>
                        <p><strong>Resource Tip:</strong> Practice tests show diverse formula applications.</p>
                    `;
                    break;
                case 'transformations':
                    title = 'Strategies for Function Transformations';
                    strategies = `
                        <p>4 students found transformations challenging. Try:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Practice in the order: horizontal, vertical shifts, stretches, reflections</li>
                            <li class="recommendation-item">Use Desmos to visualize each step</li>
                            <li class="recommendation-item">Reference a sheet with examples of each transformation</li>
                            <li class="recommendation-item">Reverse-engineer graphs to equations</li>
                        </ul>
                        <p><strong>Resource Tip:</strong> Professor’s videos on transformations are highly recommended.</p>
                    `;
                    break;
                default:
                    title = 'Topic Strategies';
                    strategies = `<p>Select a topic from the difficulty map to see specific strategies.</p>`;
            }
            topicTitle.textContent = title;
            topicContent.innerHTML = strategies;
            topicStrategies.style.display = 'block';
            topicStrategies.scrollIntoView({ behavior: 'smooth' });
        }

        // Generate personalized recommendations based on form data
        function generateRecommendations() {
            const preparationLevel = document.getElementById('preparation-level').value;
            const challengingTopics = [];
            document.querySelectorAll('input[name="challenging-topics"]:checked').forEach(checkbox => challengingTopics.push(checkbox.value));
            const studyMethods = [];
            document.querySelectorAll('input[name="study-methods"]:checked').forEach(checkbox => studyMethods.push(checkbox.value));
            const factors = [];
            document.querySelectorAll('input[name="factors"]:checked').forEach(checkbox => factors.push(checkbox.value));
            let recommendations = '';
            if (preparationLevel === 'not') {
                recommendations += `
                    <h3>Based on your preparation level:</h3>
                    <ul class="recommendation-list">
                        <li class="recommendation-item"><strong>Start studying at least one week before the test.</strong> 12 students who weren't well-prepared mentioned this.</li>
                        <li class="recommendation-item">Take the practice test multiple times to identify gaps and reinforce learning.</li>
                        <li class="recommendation-item">Schedule study blocks in your calendar as fixed appointments.</li>
                    </ul>
                `;
            } else if (preparationLevel === 'somewhat') {
                recommendations += `
                    <h3>Based on your preparation level:</h3>
                    <ul class="recommendation-list">
                        <li class="recommendation-item"><strong>Focus on your weaker topics first.</strong> Many felt they didn’t spend enough time on challenging concepts.</li>
                        <li class="recommendation-item">Try teaching the material to someone else to reinforce understanding.</li>
                        <li class="recommendation-item">Utilize the AI tutor for targeted help.</li>
                    </ul>
                `;
            } else if (preparationLevel === 'well') {
                recommendations += `
                    <h3>Based on your preparation level:</h3>
                    <ul class="recommendation-list">
                        <li class="recommendation-item"><strong>Maintain your effective study habits!</strong> Only 23% felt well-prepared.</li>
                        <li class="recommendation-item">Consider forming a study group; teaching others reinforces your knowledge.</li>
                        <li class="recommendation-item">Challenge yourself with the toughest practice problems.</li>
                    </ul>
                `;
            }
            if (challengingTopics.length > 0) {
                recommendations += `<h3>For your challenging topics:</h3><ul class="recommendation-list">`;
                if (challengingTopics.includes('graphing')) {
                    recommendations += `<li class="recommendation-item"><strong>Graphing functions:</strong> Use Desmos to visualize and practice key features.</li>`;
                }
                if (challengingTopics.includes('trig')) {
                    recommendations += `<li class="recommendation-item"><strong>Trigonometric functions:</strong> Create a visual reference connecting unit circle values to graphs.</li>`;
                }
                if (challengingTopics.includes('unit')) {
                    recommendations += `<li class="recommendation-item"><strong>Unit circle:</strong> Draw it daily from memory to build familiarity.</li>`;
                }
                if (challengingTopics.includes('formulas')) {
                    recommendations += `<li class="recommendation-item"><strong>Formula application:</strong> Develop a formula sheet with examples for different contexts.</li>`;
                }
                if (challengingTopics.includes('transformations')) {
                    recommendations += `<li class="recommendation-item"><strong>Function transformations:</strong> Practice in a logical order: horizontal shifts, vertical shifts, then stretches/reflections.</li>`;
                }
                recommendations += `</ul>`;
            }
            recommendations += `<h3>Optimizing your study methods:</h3><ul class="recommendation-list">`;
            if (!studyMethods.includes('practice')) {
                recommendations += `<li class="recommendation-item"><strong>Add practice problems.</strong> 64% of students found this most effective.</li>`;
            }
            if (!studyMethods.includes('formula')) {
                recommendations += `<li class="recommendation-item"><strong>Create your own formula sheet.</strong> It aids memorization and quick reference.</li>`;
            }
            if (studyMethods.includes('review') && !studyMethods.includes('practice')) {
                recommendations += `<li class="recommendation-item"><strong>Convert review to active practice.</strong> Solve problems without looking at the answers.</li>`;
            }
            if (!studyMethods.includes('videos')) {
                recommendations += `<li class="recommendation-item"><strong>Supplement with video tutorials.</strong> Visual aids help with complex topics.</li>`;
            }
            recommendations += `<li class="recommendation-item"><strong>Break down complex problems step-by-step.</strong> This strategy was highlighted by 5 successful students.</li>`;
            recommendations += `</ul>`;
            if (factors.length > 0) {
                recommendations += `<h3>Addressing your challenges:</h3><ul class="recommendation-list">`;
                if (factors.includes('procrastination')) {
                    recommendations += `<li class="recommendation-item"><strong>For procrastination:</strong> Try the Pomodoro technique and set daily goals.</li>`;
                }
                if (factors.includes('work')) {
                    recommendations += `<li class="recommendation-item"><strong>For a busy schedule:</strong> Study in short, frequent sessions and plan around work hours.</li>`;
                }
                if (factors.includes('multiple')) {
                    recommendations += `<li class="recommendation-item"><strong>For multiple tests:</strong> Create a study calendar and prioritize by difficulty.</li>`;
                }
                if (factors.includes('anxiety')) {
                    recommendations += `<li class="recommendation-item"><strong>For test anxiety:</strong> Practice with timed tests and take breathing breaks.</li>`;
                }
                if (factors.includes('confidence')) {
                    recommendations += `<li class="recommendation-item"><strong>For confidence issues:</strong> Focus on mastering one concept at a time and celebrate small wins.</li>`;
                }
                recommendations += `</ul>`;
            }
            recommendations += `
                <h3>Recommended Resources:</h3>
                <ul class="recommendation-list">
                    <li class="recommendation-item"><strong>Practice tests</strong> - Highly recommended by 9 students</li>
                    <li class="recommendation-item"><strong>Professor's videos</strong> - Valued by 8 students for complex topics</li>
                    <li class="recommendation-item"><strong>Formula sheets</strong> - Helpful for quick references</li>
                    <li class="recommendation-item"><strong>AI Tutor</strong> - For personalized explanations</li>
                </ul>
            `;
            document.getElementById('recommendation-content').innerHTML = recommendations;
            document.getElementById('recommendation-result').style.display = 'block';
            showSuccessStories(preparationLevel, challengingTopics, factors);
            createConfetti();
            document.getElementById('recommendation-result').scrollIntoView({ behavior: 'smooth' });
        }

        // Show success stories based on input
        function showSuccessStories(preparationLevel, challengingTopics, factors) {
            const successStoriesElement = document.getElementById('success-stories');
            const successStoriesContent = document.getElementById('success-stories-content');
            let stories = '';
            if (preparationLevel === 'not') {
                stories += `
                    <div class="quote-container">
                        <div class="quote-marks open">"</div>
                        <p class="quote-text">I failed my first test due to cramming. Once I studied 30 minutes daily for a week and repeated the practice test, my score jumped from 58% to 87%!</p>
                        <p class="quote-author">- Student who improved their grade</p>
                        <div class="quote-marks close">"</div>
                    </div>
                `;
            }
            if (challengingTopics.includes('graphing')) {
                stories += `
                    <div class="quote-container">
                        <div class="quote-marks open">"</div>
                        <p class="quote-text">Graphing was my toughest subject. Using Desmos and practicing hand-drawn sketches made all the difference.</p>
                        <p class="quote-author">- Student who mastered graphing</p>
                        <div class="quote-marks close">"</div>
                    </div>
                `;
            }
            if (factors.includes('work')) {
                stories += `
                    <div class="quote-container">
                        <div class="quote-marks open">"</div>
                        <p class="quote-text">Balancing work and study was hard. I used my lunch break to review key concepts, and it really helped.</p>
                        <p class="quote-author">- Working student who succeeded</p>
                        <div class="quote-marks close">"</div>
                    </div>
                `;
            }
            if (stories === '') {
                stories += `
                    <div class="quote-container">
                        <div class="quote-marks open">"</div>
                        <p class="quote-text">Practice problems and professor videos turned my struggles into strengths.</p>
                        <p class="quote-author">- Successful Precalculus Student</p>
                        <div class="quote-marks close">"</div>
                    </div>
                `;
            }
            successStoriesContent.innerHTML = stories;
            successStoriesElement.style.display = 'block';
        }

        // Create confetti effect
        function createConfetti() {
            const confettiContainer = document.createElement('div');
            confettiContainer.classList.add('confetti');
            document.body.appendChild(confettiContainer);
            const colors = ['#4cc9f0', '#4361ee', '#3a0ca3', '#7209b7', '#f72585'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti-piece');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confettiContainer.appendChild(confetti);
            }
            setTimeout(() => { confettiContainer.remove(); }, 5000);
        }

        // Animate emoji
        function animateEmoji(emoji) {
            const emojiElement = document.createElement('div');
            emojiElement.classList.add('emoji-animation');
            emojiElement.textContent = emoji;
            emojiElement.style.left = (Math.random() * 80 + 10) + 'vw';
            document.body.appendChild(emojiElement);
            setTimeout(() => { emojiElement.remove(); }, 3000);
        }

        // Show achievement details in a modal-like popup
        function showAchievementDetails(type) {
            let title = '';
            let content = '';
            switch(type) {
                case 'practice':
                    title = 'Practice Tests: The Top Strategy';
                    content = `
                        <p>10 students specifically mentioned practice tests as their most effective strategy.</p>
                        <p>Key tips for practice tests:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Take the test at least twice, focusing on different aspects each time</li>
                            <li class="recommendation-item">Time yourself to simulate exam conditions</li>
                            <li class="recommendation-item">Review mistakes to identify areas for improvement</li>
                            <li class="recommendation-item">Keep a log of common error patterns</li>
                        </ul>
                    `;
                    break;
                case 'early':
                    title = 'Early Preparation: Most Common Improvement';
                    content = `
                        <p>12 students emphasized the importance of starting early.</p>
                        <p>Effective early prep tips:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Begin studying at least one week prior</li>
                            <li class="recommendation-item">Schedule daily study sessions with specific topics</li>
                            <li class="recommendation-item">Tackle challenging topics when you’re freshest</li>
                            <li class="recommendation-item">Use focused study blocks (e.g., Pomodoro technique)</li>
                        </ul>
                    `;
                    break;
                case 'formula':
                    title = 'Formula Mastery: Key to Success';
                    content = `
                        <p>Understanding when and how to apply formulas is crucial.</p>
                        <p>Formula mastery tips:</p>
                        <ul class="recommendation-list">
                            <li class="recommendation-item">Create detailed formula sheets with application examples</li>
                            <li class="recommendation-item">Practice identifying the right formula for various problems</li>
                            <li class="recommendation-item">Develop decision trees for formula selection</li>
                            <li class="recommendation-item">Test your understanding by deriving formulas from basics</li>
                        </ul>
                    `;
                    break;
            }
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '50%';
            modal.style.left = '50%';
            modal.style.transform = 'translate(-50%, -50%)';
            modal.style.backgroundColor = 'white';
            modal.style.padding = '20px';
            modal.style.borderRadius = '10px';
            modal.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.3)';
            modal.style.zIndex = '1000';
            modal.style.maxWidth = '500px';
            modal.style.width = '90%';
            modal.innerHTML = `
                <h3 style="color: var(--primary); margin-bottom: 15px;">${title}</h3>
                ${content}
                <button style="margin-top: 15px; background: var(--primary); color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;" onclick="this.parentNode.remove()">Close</button>
            `;
            document.body.appendChild(modal);
            const backdrop = document.createElement('div');
            backdrop.style.position = 'fixed';
            backdrop.style.top = '0';
            backdrop.style.left = '0';
            backdrop.style.width = '100%';
            backdrop.style.height = '100%';
            backdrop.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
            backdrop.style.zIndex = '999';
            backdrop.onclick = function() { backdrop.remove(); modal.remove(); };
            document.body.appendChild(backdrop);
        }
    </script>
</body>
</html>
